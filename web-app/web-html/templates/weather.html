<!DOCTYPE html>
<html>

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="Disaster management, disaster prediction, emergency response" />
    <meta name="description" content="Together - A website dedicated to disaster management, helping communities predict and manage disasters." />
    <meta name="author" content="Together" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/fevicon.png') }}" type="image/x-icon">
    <title>Together - Services</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/bootstrap.css') }}" />

    <!-- Fonts style -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Owl slider stylesheet -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <!-- Nice select -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css" />
    <!-- Font awesome style -->
    <link href="{{ url_for('static', filename='css/font-awesome.min.css') }}" rel="stylesheet" />
    
    <!-- Custom styles for this template -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" />
    <!-- Responsive style -->
    <link href="{{ url_for('static', filename='css/responsive.css') }}" rel="stylesheet" />

    <style>
        html, body {
            height: 100%; /* Full height for html and body */
            margin: 0; /* Remove default margin */
        }

        body {
            display: flex;
            flex-direction: column; /* Stack elements vertically */
        }

        .weather-container {
            background-color: #f0f8ff; /* Light blue background */
            border: 1px solid #e0e0e0; /* Light gray border */
            border-radius: 8px; /* Rounded corners */
            padding: 20px; /* Padding inside the container */
            margin: 20px auto; /* Center the container */
            width: 80%; /* Set a width for the container */
            max-width: 600px; /* Maximum width */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow effect */
            text-align: center; /* Center align text */
            flex: 1; /* Allow the weather container to grow */
        }

        .weather-container h1 {
            font-size: 2em; /* Main title size */
            color:rgb(1, 187, 243); /* Change title color to blue */
            margin-bottom: 10px; /* Space below the title */
        }

        .weather-container h2 {
            font-size: 1.5em; /* Subtitle size */
            color: #555; /* Medium gray text color */
            margin-bottom: 15px; /* Space below the subtitle */
        }

        .weather-container p {
            font-size: 1.2em; /* Details text size */
            color: #444; /* Slightly dark text color */
        }

        .info_section {
            margin-top: auto; /* Push it to the bottom */
        }

        .info_bottom {
            text-align: center; /* Center align footer text */
        }
    </style>
</head>

<body class="sub_page">
    <div class="hero_area">
        <div class="hero_bg_box">
            <img src="{{ url_for('static', filename='images/hero-bg.jpg') }}" alt="Background Image">
        </div>
        <!-- Header section starts -->
        <header class="header_section">
            <div class="header_top">
                <div class="container-fluid header_top_container">
                    <div class="contact_nav">
                        <a href="{{ url_for('map') }}">
                            <i class="fa fa-map-marker" aria-hidden="true"></i>
                            <span>Location</span>
                        </a>
                        <a href="tel:112">
                            <i class="fa fa-phone" aria-hidden="true"></i>
                            <span>Emergency: 112</span>
                        </a>
                        <a href="mailto:support@together.com">
                            <i class="fa fa-envelope" aria-hidden="true"></i>
                            <span>
                                support@together.com
                            </span>
                        </a>
                    </div>
                    <div class="social_box">
                        <a href="">
                            <i class="fa fa-facebook" aria-hidden="true"></i>
                        </a>
                        <a href="">
                            <i class="fa fa-twitter" aria-hidden="true"></i>
                        </a>
                        <a href="">
                            <i class="fa fa-linkedin" aria-hidden="true"></i>
                        </a>
                        <a href="">
                            <i class="fa fa-instagram" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="header_bottom">
                <div class="container-fluid">
                    <nav class="navbar navbar-expand-lg custom_nav-container ">
                        <a class="navbar-brand" href="{{ url_for('index') }}"> Together </a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                            <span class=""></span>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ">
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ url_for('index') }}">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ url_for('about') }}">About</a>
                                </li>
                                <li class="nav-item active">
                                    <a class="nav-link" href="{{ url_for('services') }}">Services <span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ url_for('weather_page') }}">Weather</a> 
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="{{ url_for('contact') }}">Contact Us</a>
                                </li>
                                <form class="form-inline justify-content-center">
                                    <button class="btn my-2 my-sm-0 nav_search-btn" type="submit">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                </form>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </header>
        <!-- End header section -->
    </div>

    <!--weather section starts-->
    <div class="weather-container">
        <h1>Current Weather</h1>
        <div id="weather">
            <h2>Weather at Your Current Location</h2>
            <p id="weather-details">Fetching weather data...</p>
        </div>
    </div>
  
    <script>
        var apiKey = 'd63da7de978700de204a4c1188c93c08'; // Replace with your actual API key

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(fetchWeather, handleError);
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }

        function fetchWeather(position) {
            var lat = position.coords.latitude;
            var lon = position.coords.longitude;
            var url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('HTTP error! Status: ' + response.status);
                    }
                    return response.json();
                })
                .then(data => {
                    var weatherDetails = `
                        Location: ${data.name}<br>
                        Temperature: ${data.main.temp} Â°C<br>
                        Weather: ${data.weather[0].description}<br>
                        Humidity: ${data.main.humidity} %<br>
                        Wind Speed: ${data.wind.speed} m/s
                    `;
                    document.getElementById('weather-details').innerHTML = weatherDetails;
                })
                .catch(error => {
                    document.getElementById('weather-details').innerHTML = 'Unable to fetch weather data. Error: ' + error.message;
                    console.error('Error fetching weather data:', error);
                });
        }

        function handleError(error) {
            console.warn(`ERROR(${error.code}): ${error.message}`);
            document.getElementById('weather-details').innerHTML = 'Unable to retrieve location.';
        }

        // Get current location on page load
        getCurrentLocation();
    </script>

    <div class="info_section">
        <div class="container">
            <div class="info_bottom">
                <p> &copy; 2024 Together - All Rights Reserved. </p>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
    <!-- Owl carousel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- Nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/custom.js') }}"></script>
</body>

</html>
